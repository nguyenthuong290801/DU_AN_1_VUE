import {
  __commonJS
} from "./chunk-76J2PTFD.js";

// node_modules/vue-native-websocket/dist/build.js
var require_build = __commonJS({
  "node_modules/vue-native-websocket/dist/build.js"(exports, module) {
    !function(t, e) {
      "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.VueNativeSock = e() : t.VueNativeSock = e();
    }(exports, function() {
      return function(t) {
        function e(o) {
          if (n[o])
            return n[o].exports;
          var r = n[o] = { i: o, l: false, exports: {} };
          return t[o].call(r.exports, r, r.exports, e), r.l = true, r.exports;
        }
        var n = {};
        return e.m = t, e.c = n, e.d = function(t2, n2, o) {
          e.o(t2, n2) || Object.defineProperty(t2, n2, { configurable: false, enumerable: true, get: o });
        }, e.n = function(t2) {
          var n2 = t2 && t2.__esModule ? function() {
            return t2.default;
          } : function() {
            return t2;
          };
          return e.d(n2, "a", n2), n2;
        }, e.o = function(t2, e2) {
          return Object.prototype.hasOwnProperty.call(t2, e2);
        }, e.p = "", e(e.s = 1);
      }([function(t, e, n) {
        "use strict";
        function o(t2, e2) {
          if (!(t2 instanceof e2))
            throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(e, "__esModule", { value: true });
        var r = function() {
          function t2(t3, e2) {
            for (var n2 = 0; n2 < e2.length; n2++) {
              var o2 = e2[n2];
              o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(t3, o2.key, o2);
            }
          }
          return function(e2, n2, o2) {
            return n2 && t2(e2.prototype, n2), o2 && t2(e2, o2), e2;
          };
        }(), i = function() {
          function t2() {
            o(this, t2), this.listeners = /* @__PURE__ */ new Map();
          }
          return r(t2, [{ key: "addListener", value: function(t3, e2, n2) {
            return "function" == typeof e2 && (this.listeners.has(t3) || this.listeners.set(t3, []), this.listeners.get(t3).push({ callback: e2, vm: n2 }), true);
          } }, { key: "removeListener", value: function(t3, e2, n2) {
            var o2 = this.listeners.get(t3), r2 = void 0;
            return !!(o2 && o2.length && (r2 = o2.reduce(function(t4, o3, r3) {
              return "function" == typeof o3.callback && o3.callback === e2 && o3.vm === n2 && (t4 = r3), t4;
            }, -1)) > -1) && (o2.splice(r2, 1), this.listeners.set(t3, o2), true);
          } }, { key: "emit", value: function(t3) {
            for (var e2 = arguments.length, n2 = Array(e2 > 1 ? e2 - 1 : 0), o2 = 1; o2 < e2; o2++)
              n2[o2 - 1] = arguments[o2];
            var r2 = this.listeners.get(t3);
            return !(!r2 || !r2.length) && (r2.forEach(function(t4) {
              var e3;
              (e3 = t4.callback).call.apply(e3, [t4.vm].concat(n2));
            }), true);
          } }]), t2;
        }();
        e.default = new i();
      }, function(t, e, n) {
        t.exports = n(2);
      }, function(t, e, n) {
        "use strict";
        function o(t2) {
          return t2 && t2.__esModule ? t2 : { default: t2 };
        }
        Object.defineProperty(e, "__esModule", { value: true });
        var r = n(3), i = o(r), s = n(0), c = o(s);
        e.default = { install: function(t2, e2) {
          var n2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
          if (!e2 && !n2.connectManually)
            throw new Error("[vue-native-socket] cannot locate connection");
          var o2 = null;
          n2.$setInstance = function(e3) {
            t2.prototype.$socket = e3;
          }, n2.connectManually ? (t2.prototype.$connect = function() {
            var r3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : e2, s2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : n2;
            s2.$setInstance = n2.$setInstance, o2 = new i.default(r3, s2), t2.prototype.$socket = o2.WebSocket;
          }, t2.prototype.$disconnect = function() {
            o2 && o2.reconnection && (o2.reconnection = false), t2.prototype.$socket && (t2.prototype.$socket.close(), delete t2.prototype.$socket);
          }) : (o2 = new i.default(e2, n2), t2.prototype.$socket = o2.WebSocket);
          var r2 = "undefined" != typeof Proxy && "function" == typeof Proxy && /native code/.test(Proxy.toString());
          t2.mixin({ created: function() {
            var t3 = this, e3 = this, n3 = this.$options.sockets;
            r2 ? (this.$options.sockets = new Proxy({}, { set: function(t4, n4, o3) {
              return c.default.addListener(n4, o3, e3), t4[n4] = o3, true;
            }, deleteProperty: function(t4, n4) {
              return c.default.removeListener(n4, e3.$options.sockets[n4], e3), delete t4.key, true;
            } }), n3 && Object.keys(n3).forEach(function(e4) {
              t3.$options.sockets[e4] = n3[e4];
            })) : (Object.seal(this.$options.sockets), n3 && Object.keys(n3).forEach(function(t4) {
              c.default.addListener(t4, n3[t4], e3);
            }));
          }, beforeDestroy: function() {
            var t3 = this;
            if (r2) {
              var e3 = this.$options.sockets;
              e3 && Object.keys(e3).forEach(function(e4) {
                delete t3.$options.sockets[e4];
              });
            }
          } });
        } };
      }, function(t, e, n) {
        "use strict";
        function o(t2, e2) {
          if (!(t2 instanceof e2))
            throw new TypeError("Cannot call a class as a function");
        }
        Object.defineProperty(e, "__esModule", { value: true });
        var r = function() {
          function t2(t3, e2) {
            for (var n2 = 0; n2 < e2.length; n2++) {
              var o2 = e2[n2];
              o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(t3, o2.key, o2);
            }
          }
          return function(e2, n2, o2) {
            return n2 && t2(e2.prototype, n2), o2 && t2(e2, o2), e2;
          };
        }(), i = n(0), s = function(t2) {
          return t2 && t2.__esModule ? t2 : { default: t2 };
        }(i), c = function() {
          function t2(e2) {
            var n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            if (o(this, t2), this.format = n2.format && n2.format.toLowerCase(), e2.startsWith("//")) {
              e2 = ("https:" === window.location.protocol ? "wss" : "ws") + ":" + e2;
            }
            this.connectionUrl = e2, this.opts = n2, this.reconnection = this.opts.reconnection || false, this.reconnectionAttempts = this.opts.reconnectionAttempts || 1 / 0, this.reconnectionDelay = this.opts.reconnectionDelay || 1e3, this.reconnectTimeoutId = 0, this.reconnectionCount = 0, this.passToStoreHandler = this.opts.passToStoreHandler || false, this.connect(e2, n2), n2.store && (this.store = n2.store), n2.mutations && (this.mutations = n2.mutations), this.onEvent();
          }
          return r(t2, [{ key: "connect", value: function(t3) {
            var e2 = this, n2 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, o2 = n2.protocol || "";
            return this.WebSocket = n2.WebSocket || ("" === o2 ? new WebSocket(t3) : new WebSocket(t3, o2)), "json" === this.format && ("sendObj" in this.WebSocket || (this.WebSocket.sendObj = function(t4) {
              return e2.WebSocket.send(JSON.stringify(t4));
            })), this.WebSocket;
          } }, { key: "reconnect", value: function() {
            var t3 = this;
            this.reconnectionCount <= this.reconnectionAttempts ? (this.reconnectionCount++, clearTimeout(this.reconnectTimeoutId), this.reconnectTimeoutId = setTimeout(function() {
              t3.store && t3.passToStore("SOCKET_RECONNECT", t3.reconnectionCount), t3.connect(t3.connectionUrl, t3.opts), t3.onEvent();
            }, this.reconnectionDelay)) : this.store && this.passToStore("SOCKET_RECONNECT_ERROR", true);
          } }, { key: "onEvent", value: function() {
            var t3 = this;
            ["onmessage", "onclose", "onerror", "onopen"].forEach(function(e2) {
              t3.WebSocket[e2] = function(n2) {
                s.default.emit(e2, n2), t3.store && t3.passToStore("SOCKET_" + e2, n2), t3.reconnection && "onopen" === e2 && (t3.opts.$setInstance(n2.currentTarget), t3.reconnectionCount = 0), t3.reconnection && "onclose" === e2 && t3.reconnect();
              };
            });
          } }, { key: "passToStore", value: function(t3, e2) {
            this.passToStoreHandler ? this.passToStoreHandler(t3, e2, this.defaultPassToStore.bind(this)) : this.defaultPassToStore(t3, e2);
          } }, { key: "defaultPassToStore", value: function(t3, e2) {
            if (t3.startsWith("SOCKET_")) {
              var n2 = "commit", o2 = t3.toUpperCase(), r2 = e2;
              "json" === this.format && e2.data && (r2 = JSON.parse(e2.data), r2.mutation ? o2 = [r2.namespace || "", r2.mutation].filter(function(t4) {
                return !!t4;
              }).join("/") : r2.action && (n2 = "dispatch", o2 = [r2.namespace || "", r2.action].filter(function(t4) {
                return !!t4;
              }).join("/"))), this.mutations && (o2 = this.mutations[o2] || o2), this.store[n2](o2, r2);
            }
          } }]), t2;
        }();
        e.default = c;
      }]);
    });
  }
});
export default require_build();
//# sourceMappingURL=vue-native-websocket.js.map
